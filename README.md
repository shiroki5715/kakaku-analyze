# PCパーツ価格差・自動分析ツール

## 1. 概要

AmazonでのPCパーツせどりを効率化するため、複数ECサイトとAmazonの商品価格を自動で比較し、設定した利益率を上回る商品を見つけ出すことを目的とした、ローカルで動作するWebアプリケーションです。

## 2. 機能仕様

- **WebベースのUI:**
  - ユーザーは自身のPCでサーバーを起動し、ブラウザから `http://localhost:5000` にアクセスしてツールを操作します。
- **複数サイトの巡回:**
  - ユーザーが指定した複数のECサイトの商品一覧ページを自動で巡回し、商品情報を収集します。
- **価格差の指定:**
  - 「仕入れ値に対し、Amazonでの販売価格が何%以上か」という利益率のしきい値を、ユーザーが自由に設定できます。
- **ハイブリッド型の商品マッチング:**
  - **ルールベース一次判定:** 正規化（表記の揺れを吸収）した型番の文字列比較により、高速・無料で大部分のマッチングを行います。
  - **AI二次判定:** ルールベースで判断に迷った候補のみ、**Gemini API**に問い合わせ、人間のような文脈判断で高精度な最終判定を仰ぎます。
- **自己改善する学習機能:**
  - AIが下した判断を「学習ノート」としてローカルに記録・蓄積します。
  - ツールを使えば使うほど、AIへの問い合わせ回数が減り、処理の高速化とAPIコストの削減が実現されます。
- **結果のエクスポート:**
  - 分析結果は、Webページ上に一覧表示されるほか、ExcelやCSVファイルとしてダウンロードできます。

## 3. 技術スタック

- **バックエンド:** Python, Flask
- **Webスクレイピング:** Playwright
- **AI連携:** Google Gemini API
- **実行環境:** ローカルPC

## 4. 現在の使い方

1.  コマンドプロンプトで `python web_server.py` を実行し、ローカルサーバーを起動します。
2.  ブラウザで `http://localhost:5000` を開きます。
3.  表示されたフォームで、以下の項目を設定します。
    *   **調査するカテゴリ:** ドロップダウンから選択します。（必須）
    *   **絞り込みキーワード:** カテゴリ内で、さらに絞り込みたいキーワードを入力します。（任意）
    *   **比較件数:** TSUKUMOで見つかった商品のうち、上位何件をAmazonと比較するかを指定します。
    *   **利益率(%):** ここで指定した利益率を上回る商品のみが、最終的な結果に表示されます。
4.  「比較開始」ボタンをクリックします。
5.  処理が完了すると、条件に合致した商品だけが、画面に一覧表示されます。

## 5. ターゲットサイト

（ユーザー指定の全18サイトをフェーズ分けして記載）

**フェーズ1：PC専門店（王道）**
- TSUKUMO, ドスパラ, パソコン工房

**(フェーズ2以降は省略)**
